<!DOCTYPE html>



 <html class="no-js"> 
<head>
    <title>4、Hexo博客主题的修改  &middot; Haijd&#39;s Blog </title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="content-language" content="en-us" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="author" content="Haijd">
    <meta name="description" content="a coder.">
    <meta name="generator" content="Hugo 0.53" />

    <!-- Stylesheets -->
    <link rel="stylesheet" href="/css/smooth-scrollbar.css" />
    <link rel="stylesheet" type="text/css" href="/css/main.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/tomorrow.min.css" />
    

    <style>
        .posts li {
            visibility: hidden;
        }
    </style> 
</head>

<body>

    

    <header>
    <div class="h-wrap">
        
        <div class="typewriter">
            <h1 class="title"><a href="/">Haijd&#39;s Blog</a></h1>
        </div>
        
    </div>
</header>
    <div class="site-wrapper" id="full-wrapper">

        <section class="single-wrap">
            <article class="single-content" itemscope itemtype="//schema.org/BlogPosting">
                <div class="feat">
                    <h5 class="page-date">
                        <time datetime="" itemprop="datePublished">
                    06 March 2016
                   
                    </time>
                    </h5>
                </div>
                <h1 class="page-title" itemprop="name headline">4、Hexo博客主题的修改</h1>
                <br>
                
                <div>
                    
                    <img src="http://lorempixel.com/1000/500/technics/">
                    
                </div>
                
                <div>
                    <nav id="TableOfContents">
<ul>
<li><a href="#1-主题文件说明">1. 主题文件说明</a></li>
<li><a href="#2-主题修改">2. 主题修改</a>
<ul>
<li><a href="#2-1-source文件夹">2.1. source文件夹</a></li>
<li><a href="#2-2-layout文件夹">2.2. layout文件夹</a>
<ul>
<li><a href="#2-2-1-添加多说评论">2.2.1. 添加多说评论</a></li>
<li><a href="#2-2-2-添加微博秀侧边栏组件">2.2.2. 添加微博秀侧边栏组件</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
                </div>
                <hr>
                <div itemprop="articleBody">
                    <p>　　在这一篇中介绍一下Hexo主题的一些修改方法，在这里是基于默认主题介绍的，但是了解一下，对使用其他主题也有些帮助。</p>

<h1 id="1-主题文件说明">1. 主题文件说明</h1>

<p>　　依次打开博客文件夹根目录下的<code>themes\landscape\</code>，可以看见主题包里面一些文件夹和文件，我们先认识一下这些文件分别是什么：
<img src="http://ww3.sinaimg.cn/mw690/c55a7aeejw1f1njlex0x6j208508hgli.jpg" alt="" /></p>

<p>　　1. <code>languages</code>：语言文件包，存放网页语言文件。
　　2. <code>layout</code>：页面模板文件夹，保存生成静态页面的HTML模板文件，使用的是EJS模板引擎编写，会HTML的话就很容易看懂。
　　3. <code>scripts</code>：存放网页中要使用的脚本文件。</p>

<ol>
<li><code>source</code>：存放资源文件，比如CSS文件和js文件、图片等静态资源。
　　5. <code>.gitignore</code>：git提交时的忽略文件配置信息文件，主题自动生成的，不用管。
　　6. <code>_config.yml</code>：主题的配置文件。
　　7. <code>Gruntfile.js</code>：这个是前端的代码压缩文件，使用Grunt工具压缩代码，减少页面加载时间。这个是新增的文件，其他主题中可能没有，不用在意。
　　8. <code>LICENSE</code>：Git生成的版权许可文件，不用管。
　　9. <code>package.json</code>：前端工具包配置文件，配置前端工具等信息，比如刚才的Grunt工具的信息就是在这里配置的。不用管。
　　10. <code>README.md</code>：github生成的项目说明文件。不用管。</li>
</ol>

<h1 id="2-主题修改">2. 主题修改</h1>

<p>　　了解了主题中的文件之后，其实修改主题的话，主要用到的有三个：<code>_config.yml</code>、<code>layout</code>、<code>source</code>。其中<code>_config.yml</code>为配置文件不用太多的修改，上一篇中介绍过了。Hexo主题的主要修改的文件就在后两个文件夹中。
　　“layout”文件中主要是网页的HTML模板代码，“source”文件夹中是网页的样式文件(css)和一些动态效果的文件(js)。对前端比较熟悉的同学可以研究一下，自己编写想要的风格和效果，由于我的前端知识不多，就不详细介绍了。</p>

<h2 id="2-1-source文件夹">2.1. source文件夹</h2>

<p>　　由于样式文件夹中的内容比较简单一些，我们先来看看：
　　打开之后又三个文件夹：<code>css</code>、<code>fancybox</code>、<code>js</code>。其中<code>fancybox</code>是fancybox插件用到的一些静态文件，不用管它。其他两个就是样式和脚本了。
　　这两个文件夹中的内容可以根据需要随意修改，举个例子，我们打开<code>css</code>文件夹，可以看到有一个<code>images</code>文件夹，这里面就是CSS用到的背景图片之类的资源，把里面的图片替换掉看看效果：
<img src="http://ww3.sinaimg.cn/mw690/c55a7aeejw1f1nkrahlcrj212n0m1qc9.jpg" alt="" /></p>

<h2 id="2-2-layout文件夹">2.2. layout文件夹</h2>

<p>　　这个文件夹算是比较重要的，博客页面构成就靠它了。
　　点进去看看能够知道，landscape主题的文件分布比较细致，基本每一个模块都分离成单独的文件了，这样容易看懂，修改也比较方便，赞一个。
　　具体的代码就不介绍了，大家感兴趣可以看看，很简单的，尝试修改然后预览，这样大致就明白里面的代码了。在这里只介绍一下给文章添加一个多说评论、侧边栏增加一个微博秀。</p>

<h3 id="2-2-1-添加多说评论">2.2.1. 添加多说评论</h3>

<p><strong>申请多说评论账号</strong>
　　大家可以去<a href="http://duoshuo.com/">多说网站</a>申请一个多说账号，具体的申请就不多介绍了，介绍一下怎么用：
　　进入你添加的博客站点后台，找到工具这一栏，可以看到有获取代码的选项，我们使用通用代码就可以了，复制生成的代码：
<img src="http://ww1.sinaimg.cn/mw690/c55a7aeejw1f1nl81t9bvj212n0j4jvv.jpg" alt="" />
　　
<strong>粘贴代码</strong>
　　依次打开<code>\layout\_partial\article.ejs</code>，找到文件中的<code>&lt;footer class=&quot;article-footer&quot;&gt;</code>节点，在该节点的前面粘贴刚刚复制的代码。
　　1. 将<code>data-thread-key</code>的值替换成<code>&lt;%= page.path %&gt;&quot;</code>。
　　2. 将<code>data-title</code>的值替换成<code>&lt;%= page.title %&gt;</code>。
　　3. 将<code>data-url</code>的值替换成<code>&lt;%= page.permalink %&gt;</code>。</p>

<p>　　现在保存该文件，刷新一下页面试试，看看评论框是不是出现在了合适的位置：
<img src="http://ww1.sinaimg.cn/mw690/c55a7aeejw1f1nlprob22j21290l70tl.jpg" alt="" /></p>

<p>　　<strong>大家可以按照这样的方式，举一反三，给博客添加百度分享等插件。</strong></p>

<h3 id="2-2-2-添加微博秀侧边栏组件">2.2.2. 添加微博秀侧边栏组件</h3>

<p>　　大家可以去微博主页，搜索微博秀就可以看到微博秀的网页应用了，然后就可以获得微博秀的插件代码，具体的获取方式就不多做介绍了 。</p>

<p><strong>增加微博秀侧边栏模板</strong>
　　依次打开<code>\layout\_widget</code>，新建一个名为&rdquo;weiboshow.ejs&rdquo;的文件，用编辑器打开，添加下面的代码并保存：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#ff79c6">div</span> <span style="color:#50fa7b">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;widget-wrap&#34;</span>&gt;
    &lt;<span style="color:#ff79c6">h3</span> <span style="color:#50fa7b">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;widget-title&#34;</span>&gt;微博秀&lt;/<span style="color:#ff79c6">h3</span>&gt;
    &lt;<span style="color:#ff79c6">div</span> <span style="color:#50fa7b">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;widget&#34;</span>&gt;
      
      在这里粘贴你的微博秀插件代码
      
    &lt;/<span style="color:#ff79c6">div</span>&gt;
  &lt;/<span style="color:#ff79c6">div</span>&gt;</code></pre></td></tr></table>
</div>
</div>
<p><strong>在主题配置中添加微博秀组件</strong>
　　我们已将创建好了微博秀的模板，现在需要把组件添加到主题的配置文件中，让Hexo渲染出来。</p>

<p>　　打开主题文件夹根目录下的<code>_config.yml</code>文件，找到<code>widgets</code>这个配置节点，在下面添加微博秀模板的名字“weiboshow”比如：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">...

<span style="color:#6272a4"># Sidebar</span>
sidebar: right   <span style="color:#6272a4">#侧边栏的位置</span>
widgets:        <span style="color:#6272a4">#侧边栏小工具组件</span>
- weiboshow     <span style="color:#6272a4">#微博秀组件     </span>
- category      <span style="color:#6272a4">#分类</span>
- tag           <span style="color:#6272a4">#标签</span>
- tagcloud      <span style="color:#6272a4">#标签云</span>
- archive       <span style="color:#6272a4">#存档</span>
- recent_posts  <span style="color:#6272a4">#最新发布</span>

...</code></pre></td></tr></table>
</div>
</div>
<p>　　从这里不难看出，Hexo主题会从配置文件中读取侧边栏挂件信息，去对应的寻找文件进行加载。  值得注意的是，这些名称的顺序会影响挂件在页面的显示顺序，比如我把&rdquo;weiboshow&rdquo;写在第一行了，那么在加载页面是，我的微博秀就是侧边栏的最上面。
![]()</p>
                </div>
                <div class="feat share">
                </div>

                <div id="disqus_thread"></div>
<script>
    

    

    (function() { 
        var d = document,
            s = d.createElement('script');

        s.src = 'https://HaijdBlog.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

            </article>
        </section>

        <footer>
	
	<small>Haijd</small>
	
</footer>
    </div>

    <div class="next-prev-arrows">
        
        <a rel="next" href="/blog/5hexo%E5%8D%9A%E5%AE%A2%E7%9A%84%E5%86%99%E4%BD%9C/" id="next">
                &larr; <span class="nav-title nav-title-next">5、Hexo博客的写作</span> 
            </a>  
        <a rel="prev" href="/blog/3hexo%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AE%E5%92%8C%E4%B8%BB%E9%A2%98/" id="prev">
            <span class="nav-title nav-title-prev">3、Hexo博客配置和主题</span> &rarr;
        </a>
        
    </div>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="/js/scrollreveal.min.js"></script>
<script type='application/javascript' src='/js/smooth-scrollbar.js'></script>
<script src="/js/baffle.min.js"></script>
<script src="/js/main.js"></script>
 
</body>

</html>