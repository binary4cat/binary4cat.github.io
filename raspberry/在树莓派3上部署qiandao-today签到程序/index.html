<!DOCTYPE html>



 <html class="no-js"> 
<head>
    <title>在树莓派3上部署qiandao.today签到程序  &middot; Haijd&#39;s Blog </title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="content-language" content="en-us" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="author" content="Haijd">
    <meta name="description" content="a coder.">
    <meta name="generator" content="Hugo 0.53" />

    <!-- Stylesheets -->
    <link rel="stylesheet" href="/css/smooth-scrollbar.css" />
    <link rel="stylesheet" type="text/css" href="/css/main.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/tomorrow.min.css" />
    

    <style>
        .posts li {
            visibility: hidden;
        }
    </style> 
</head>

<body>

    

    <header>
    <div class="h-wrap">
        
        <div class="typewriter">
            <h1 class="title"><a href="/">Haijd&#39;s Blog</a></h1>
        </div>
        
    </div>
</header>
    <div class="site-wrapper" id="full-wrapper">

        <section class="single-wrap">
            <article class="single-content" itemscope itemtype="//schema.org/BlogPosting">
                <div class="feat">
                    <h5 class="page-date">
                        <time datetime="" itemprop="datePublished">
                    15 March 2017
                   
                    </time>
                    </h5>
                </div>
                <h1 class="page-title" itemprop="name headline">在树莓派3上部署qiandao.today签到程序</h1>
                <br>
                
                <div>
                    
                    <img src="http://lorempixel.com/1000/500/technics/">
                    
                </div>
                
                <div>
                    <nav id="TableOfContents">
<ul>
<li><a href="#1-项目介绍">1. 项目介绍</a></li>
<li><a href="#2-部署在本地的树莓派上">2. 部署在本地的树莓派上</a>
<ul>
<li><a href="#2-1-准备">2.1. 准备</a></li>
<li><a href="#2-2-部署">2.2. 部署</a>
<ul>
<li><a href="#2-2-1-clone项目">2.2.1. clone项目</a></li>
<li><a href="#2-2-2-安装项目依赖的组件">2.2.2. 安装项目依赖的组件</a></li>
</ul></li>
<li><a href="#2-3-启动">2.3. 启动</a></li>
</ul></li>
<li><a href="#3-结束">3. 结束</a></li>
</ul>
</nav>
                </div>
                <hr>
                <div itemprop="articleBody">
                    <h1 id="1-项目介绍">1. 项目介绍</h1>

<p>　　<a href="https://qiandao.today/">qiandao.today</a>是一个在github上开源的自动签到框架，使用python开发，作者是<a href="http://binux.me/">binux</a>。</p>

<p>　　github:<a href="https://github.com/binux/qiandao">https://github.com/binux/qiandao</a></p>

<h1 id="2-部署在本地的树莓派上">2. 部署在本地的树莓派上</h1>

<h2 id="2-1-准备">2.1. 准备</h2>

<p>　　首先我们准备一台安装好linux系统(raspbian、ubuntu等)的树莓派(我这里使用的是树莓派3)，连接接显示器并联网，连接键鼠。</p>

<p>操作系统为基于Debian8的Raspbian。并且修改镜像源为国内镜像，然后执行命令更新软件源：<code>sudo apt-get update</code></p>

<h2 id="2-2-部署">2.2. 部署</h2>

<p>　　签到项目是使用python开发的，被树莓派完美支持，只需安装2.7版本的python即可(如果你的系统是树莓派官方的Raspbian的话，就不需要安装了，系统自带2.7版本的python)。</p>

<h3 id="2-2-1-clone项目">2.2.1. clone项目</h3>

<p>　　首先找一个合适的位置，准备存放你的签到项目，我准备放在<code>Documents</code>文件夹下面，县使用命令行：<code>cd /home/pi/Documents</code>回车进入<code>Documents</code>文件下下面：</p>

<p>　　然后使用命令clone项目：<code>git clone https://github.com/binux/qiandao.git</code>
<img src="/image/raspberry/pi-1.png" alt="" /></p>

<p>　　如果没有执行clone，可能是git没有安装，执行命令：<code>sudo apt-get install git</code>  安装完git再执行上面的克隆命令。</p>

<h3 id="2-2-2-安装项目依赖的组件">2.2.2. 安装项目依赖的组件</h3>

<p>　　项目我们已经克隆倒本地了，现在我们需要安装运行项目所需要的组件。参照项目中的<code>README.md</code>，我们知道需要安装sqlte3数据库，还有好几个python依赖组件。</p>

<p>　　首先我们使用命令安装sqlite3数据库：<code>sudo apt-get install sqlite3</code></p>

<p>　　接下来使用项目<code>README.md</code>介绍里面的两条命令安装依赖：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo apt-get install python-dev autoconf g++ python-pbkdf2
sudo pip install tornado u-msgpack-python jinja2 chardet requests pbkdf2 pycrypto</code></pre></td></tr></table>
</div>
</div>
<p>PS：如果安装失败，很可能是网络原因，需要改用国内镜像安装，这里我们使用<a href="https://www.douban.com/note/302711300/">豆瓣源</a>安装：在命令<code>install</code>后面加上<code>-i http://pypi.douban.com/simple/</code> 即可，例如：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo pip install -i http://pypi.douban.com/simple/ tornado u-msgpack-python jinja2 chardet requests pbkdf2 pycrypto</code></pre></td></tr></table>
</div>
</div>
<h2 id="2-3-启动">2.3. 启动</h2>

<p>　　至此我们的准备工作都已经做完了，是时候启动项目了。</p>

<p>　　首先进入刚才clone的项目文件夹：<code>cd /home/pi/Documents/qiandao</code></p>

<p>　　然后执行命令：<code>./run.py</code></p>

<p>　　回车后我们就可以看到项目已经启动了，窗口显示了请求地址以及端口号：
<img src="/image/raspberry/pi-2.png" alt="" /></p>

<p>　　这是我们已经可以在浏览器访问了，在树莓派里面打开浏览器，输入<code>127.0.0.1:8923</code>然后回车访问，就可以直接浏览了：
<img src="/image/raspberry/pi-3.png" alt="" /></p>

<h1 id="3-结束">3. 结束</h1>

<p>　　至此<a href="https://qiandao.today/">qiandao.today</a>项目已经部署到树莓派上面了，如果我们想在局域网内的其他设备上访问，可以在树莓派里面使用命令：<code>ifconfig</code>查看树莓派的ip地址，然后在其他设备输入<code>IP:8923</code>，就可以访问啦。如果更近一步，我们想使用外网访问，那么可以使用花生壳做外网映射，就可以在任何设备上访问你部署在树莓派上的签到网站了，关于树莓派花生壳外网映射，可以参照这篇文章：<a href="http://service.oray.com/question/2680.html">花生壳 3.0 for 树莓派 安装使用攻略</a>。</p>

<p>　　这篇文章写到这里就结束了，如果大家在部署的时候遇到问题，可以在“关于页面找到我的联系方式，希望我能帮到你。”</p>
                </div>
                <div class="feat share">
                </div>

                <div id="disqus_thread"></div>
<script>
    

    

    (function() { 
        var d = document,
            s = d.createElement('script');

        s.src = 'https://HaijdBlog.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

            </article>
        </section>

        <footer>
	
	<small>Haijd</small>
	
</footer>
    </div>

    <div class="next-prev-arrows">
         
    </div>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="/js/scrollreveal.min.js"></script>
<script type='application/javascript' src='/js/smooth-scrollbar.js'></script>
<script src="/js/baffle.min.js"></script>
<script src="/js/main.js"></script>
 
</body>

</html>